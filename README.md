# IMDB Movie Crawler

Асинхронный краулер для сбора информации о фильмах с IMDB. Проект использует Python с асинхронными библиотеками для эффективного сбора данных.

## Функциональность

- Сбор информации о фильмах с IMDB, включая:
  - Название фильма
  - Дата релиза
  - Описание
  - Информация о съемочной группе (актеры, режиссеры и их роли)
- Асинхронная обработка для высокой производительности
- Поддержка параллельной работы нескольких экземпляров краулера
- Автоматическое обновление существующих данных
- Периодический запуск для обновления данных
- Обработка ошибок и повторные попытки для неудачных задач

## Технологии

- Python 3.9+
- PostgreSQL
- aiohttp для асинхронных HTTP-запросов
- asyncpg для асинхронной работы с PostgreSQL
- BeautifulSoup4 для парсинга HTML

## Структура проекта

- `crawler.py` - основной файл краулера
- `models.py` - работа с базой данных
- `html_parser.py` - парсинг HTML-страниц
- `config.py` - конфигурация и константы
- `requirements.txt` - зависимости проекта
- `Dockerfile` - конфигурация Docker

## Установка и запуск

1. Скопируйте файл `.env` с настройками базы данных:

2. Запустите docker-compose:

```bash
docker-compose up -d
```

3. После запуска api будет доступно по ссылке:
   [Swagger UI](http://localhost:8080/swagger-ui/index.html#)

## Особенности работы

- Краулер запускается каждый час
- При первом запуске ждет 10 секунд перед началом работы
- Задачи со статусом 'in_progress' не обрабатываются другими экземплярами
- Зависшие задачи (in_progress более часа) автоматически сбрасываются
- При ошибках задачи помечаются как failed и могут быть обработаны повторно
- Дубликаты фильмов обрабатываются с обновлением только изменившихся данных

## Логирование

Краулер ведет подробное логирование:

- Информация о начале и завершении каждого запуска
- Количество найденных и обработанных фильмов
- Ошибки при обработке задач
- Статус обновления данных
